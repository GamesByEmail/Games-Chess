<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 291">
  <g [attr.transform]="boardTransform(0,20,256,256)">
    <rect x="0" y="0" width="256" height="256" color="border" />
    <rect #boardArea x="6" y="6" width="244" height="244" />
    <g transform="translate(4,4)">
      <g *ngFor="let territory of game.board.territories" [attr.transform]="territoryTransform(territory,31,31)">
        <rect width="31" height="31" [ngClass]="classes(territory)" (mousedown)="territoryMousedown(territory,$event)"
          (mouseup)="territoryMouseup(territory,$event)" />
        <rect *ngIf="(game.over || !territory.dark) && territory.highlight" x="0.5" y="0.5" width="30" height="30" class="highlight" />
      </g>
      <g *ngFor="let territory of game.board.territories">
        <g *ngIf="(game.over || !territory.dark) && territory.piece" [attr.transform]="territoryTransform(territory,31,31,true)">
          <svg width="31" height="31" [template-projection]="templateLibrary" [bindElement]="territory.piece" [entity]="territory.piece"
            [context]="{dark:territory.dark}" class="piece" [@showCheck]="territory.piece.showCheck"></svg>
        </g>
      </g>
    </g>
  </g>
  <g *ngFor="let team of game.teams" [attr.transform]="'translate(0,'+(team.id===game.perspective ? 289 : 18)+')'">
    <g transform="translate(0,-13)">
      <svg *ngFor="let piece of team.captures;let i=index" width="13" height="13" [attr.transform]="'translate('+(13*i)+',0)'"
        [template-projection]="templateLibrary" [bindElement]="piece" [entity]="piece" class="piece"></svg>
    </g>
    <text x="256" y="0" style="font: bold 15px sans-serif;text-anchor:end;">{{team.player.title}}</text>
  </g>
  <svg xmlns="http://www.w1.5.org/1000/svg" #dialogArea x="0" y="20" width="256" height="256"></svg>
</svg>
<gamesbyemail-games-chess-default-log #log [game]="game" [pieces]="templateLibrary"></gamesbyemail-games-chess-default-log>
<gamesbyemail-games-chess-default-piecelibrary #templateLibrary></gamesbyemail-games-chess-default-piecelibrary>